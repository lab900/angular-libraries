<div class="mat-elevation-z8">
    <mat-table [dataSource]="data">
        <ng-container *ngFor="let column of columns" matColumnDef="{{column.attribute}}">
            <mat-header-cell *matHeaderCellDef> {{column.title }} </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <span *ngIf="column?.displayOptions?.customFormatter" [innerHTML]="column.displayOptions.customFormatter(element[column.attribute])" ></span>
                <span *ngIf="!column?.displayOptions?.customFormatter" [ngSwitch]="column.editType" class="table__cell__wrapper">
                    <span *ngSwitchCase="Date">
                        <lab900-date-display [data]="element[column.attribute]" [fieldType]="column"></lab900-date-display>
                    </span>
                    <span *ngSwitchCase="Image">
                        <lab900-image-display [data]="element[column.attribute]" [fieldType]="column"></lab900-image-display>
                    </span>
                    <span *ngSwitchDefault class="table__cell__wrapper__text" >{{ element[column.attribute] }}</span>
                </span>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="edit">
            <mat-header-cell *matHeaderCellDef  class="table__cell__icon"></mat-header-cell>
            <mat-cell *matCellDef="let element" class="table__cell__icon">
                <button mat-icon-button (click)="edit.emit(element)">
                    <mat-icon>edit</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="delete">
            <mat-header-cell *matHeaderCellDef  class="table__cell__icon"></mat-header-cell>
            <mat-cell *matCellDef="let element" class="table__cell__icon">
                <button mat-icon-button (click)="delete.emit(element)">
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;" class="table__row">
            <div *ngIf="!loading">
                <mat-spinner></mat-spinner>
            </div>
        </mat-row>
    </mat-table>
    <mat-card *ngIf="loading" style="display: flex; justify-content: center; align-items: center">
        <mat-progress-spinner
                color="primary"
                mode="indeterminate">
        </mat-progress-spinner>
    </mat-card>
    <mat-paginator hidePageSize [disabled]="loading" (page)="pageEvent.emit($event)" length="9999999"></mat-paginator>
</div>
